

$(document).ready(function() {

    $.ajax({
        url: "/webAjaxAll",
        type: 'GET',
        dataType: 'json',
    beforeSend: function() {
        $('.init').show();
    },
    }).done(function(dataAll) {
        $(".init").hide();
        listaAllNotices(dataAll)
        console.log(dataAll['uniao']['tcu']['original'])
    });

    /**
     * Lista todas as noticias
     * @param {Array} dataAll
     */
    function listaAllNotices(dataAll) {

        var component_all = '';

        // Seplan Noticias
        for(var i = 0; i < dataAll['uniao']['seplan'].length; i++) {
            component_all = forHtmlNotices(dataAll['uniao']['seplan'][i]['data'],
                "https://seplan.ma.gov.br/files/2019/10/logo-secretarias-seplan.jpg",
                dataAll['uniao']['seplan'][i]['titulo'][1],
                dataAll['uniao']['seplan'][i]['titulo'][0], component_all);
        }

        // Minitério da Justiça Senasp
        for(var mj = 0; mj < dataAll['uniao']['minJus']['original'].length; mj++) {
            component_all = forHtmlNotices(dataAll['uniao']['minJus']['original'][mj]['data'].replace('-', '').trim(),
            '/images/maxresdefault.png', dataAll['uniao']['minJus']['original'][mj]['titulo_link'][1],
            dataAll['uniao']['minJus']['original'][mj]['titulo_link'][0], component_all);
        }

        // TCU
        for(var tc = 0; tc < dataAll['uniao']['tcu']['original'].length; tc++) {
            component_all = forHtmlNotices(dataAll['uniao']['tcu']['original'][tc]['data'].replace('-', '').trim(),
            'https://portal.tcu.gov.br/portaltcu2017/images/TCU.svg',
            'https://portal.tcu.gov.br'+dataAll['uniao']['tcu']['original'][tc]['link'].replace('..', ''),
            dataAll['uniao']['tcu']['original'][tc]['titulo'], component_all);
        }

        // Tcema Noticias
        for(var t = 0; t < dataAll['uniao']['tcema'].length; t++) {
            component_all = forHtmlNotices(dataAll['uniao']['tcema'][t]['data'],
                "http://site.tce.ma.gov.br/templates/rt_enigma/images/logo/style2/logo.png",
                "http://site.tce.ma.gov.br/"+dataAll['uniao']['tcema'][t]['link'],
                dataAll['uniao']['tcema'][t]['texto'], component_all);
        }

        /*var component_all = '';
        for(var i = 0; i < dataAll['uniao']['seplan'].length; i++) {
            component_all += "<div class='carousel-item'>";
            component_all += "<div class='row justify-content-center'>";
            component_all += "<img style='width:15% !important;height:15% !important;' class='d-inline-block p-3 img-fluid float-left rounded' src='https://seplan.ma.gov.br/files/2019/10/logo-secretarias-seplan.jpg' alt=''>";
            component_all += "<div class='col-md-6 mt-3'>";
            component_all += "<a target='_blank' class='text-dark' href='"+dataAll['uniao']['seplan'][i]['titulo'][1]+"' style='text-decoration:none;'>";
            component_all += "<h5 class='font-weight-bold'>"+dataAll['uniao']['seplan'][i]['data']+ " - " +dataAll['uniao']['seplan'][i]['titulo'][0]+"</h5>";
            component_all += "</a>";
            component_all += "</div>";
            component_all += "</div>";
            component_all += "</div>";
        }

        for(var j = 0; j < dataAll['uniao']['tjma'].length; j++) {
            component_all += "<div class='carousel-item'>";
            component_all += "<div class='row justify-content-center'>";
            component_all += "<img style='width:15% !important;height:20% !important;' class='d-inline-block p-3 img-fluid float-left rounded' src='https://www.tjma.jus.br/imagens/marca-tjma.png' alt='"+dataAll['uniao']['tjma'][j]['texto']+"'>";
            component_all += "<div class='col-md-6 mt-3'>";
            component_all += "<a target='_blank' class='text-dark' href='"+dataAll['uniao']['tjma'][j]['link']+"' style='text-decoration:none;'>";
            component_all += "<h5 class='align-items-center font-weight-bold'>"+dataAll['uniao']['tjma'][j]['data']+" - "+dataAll['uniao']['tjma'][j]['texto']+"</h5>";
            component_all += "</a>";
            component_all += "</div>";
            component_all += "</div>";
            component_all += "</div>";
        }

        for(var t = 0; t < dataAll['uniao']['tcema'].length; t++) {
            component_all += "<div class='carousel-item'>";
            component_all += "<div class='row justify-content-center'>";
            component_all += "<img style='width:15% !important;height:20% !important;' class='d-inline-block p-3 img-fluid float-left rounded' src='http://site.tce.ma.gov.br/templates/rt_enigma/images/logo/style2/logo.png' alt='"+dataAll['uniao']['tcema'][t]['texto']+"'>";
            component_all += "<div class='col-md-6 mt-3'>";
            component_all += "<a target='_blank' class='text-dark' href='http://site.tce.ma.gov.br/"+dataAll['uniao']['tcema'][t]['link']+"' style='text-decoration:none;'>";
            component_all += "<h5 class='align-items-center font-weight-bold'>"+dataAll['uniao']['tcema'][t]['data']+" - "+dataAll['uniao']['tcema'][t]['texto']+"</h3>";
            component_all += "</a>";
            component_all += "</div>";
            component_all += "</div>";
            component_all += "</div>";
        }*/

        $('#carousel_slide_all').html(component_all);
        $('#carousel_slide_all .carousel-item').first().addClass('active');
        $('.carousel-indicators > li').first().addClass('active');
    }

    /**
     * Html de inserção dos dados das Noticias
     *
     * @param {Array} dataAll
     * @param {string} image
     * @param {string} data
     * @param {string} link
     * @param {string} titulo
     * @param {string} component_all
     */
    function forHtmlNotices(data, image, link, titulo, component_all) {
        component_all += "<div class='carousel-item'>";
        component_all += "<div class='row justify-content-center'>";
        component_all += "<img style='width:15% !important;height:15% !important;' class='d-inline-block p-3 img-fluid float-left rounded' src='"+image+"' alt='"+titulo+"'>";
        component_all += "<div class='col-md-6 mt-3'>";
        component_all += "<a target='_blank' class='text-dark' href='"+link+"' style='text-decoration:none;'>";
        component_all += "<h5 class='font-weight-bold'>"+data+ " - " +titulo+"</h5>";
        component_all += "</a>";
        component_all += "</div>";
        component_all += "</div>";
        component_all += "</div>";

        return component_all;
    }

    // CLick em Input Button TCU para mostrar 10 Noticias
    $('#bt_load_more').click(function() {console.info('Click Ok!')});

    // Init Carrousel
    $('.carousel').carousel({
        interval: 8000,
        ride: true
    });

});

