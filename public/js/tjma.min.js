
$(document).ready(function() {

    $.ajax({
        url: "/webAjax2",
        type: 'GET',
        dataType: 'json',
        beforeSend: function() {
            $('.init').show();
        }
        }).done(function(dataTjma) {
            $('.init').hide();
            listaTjmaNotices(dataTjma);
            // console.table(dataTjma)
    });

    function listaTjmaNotices(dataTjma) {

        var component_tjma = '';
        /*for(var i = 0; i < dataTjma.length; i++) {
            // component_seplan += "<li data-target='#carouselExampleIndicators' data-slide-to='"+i+"'></li>";
        };
        $('.carousel-indicators').html(component_tjma);*/

        for(var i = 0; i < dataTjma.length; i++) {
            component_tjma += "<div class='carousel-item'>";
            // component_tjma += "<div class='d-flex h-100 align-items-center justify-content-center carousel-caption d-none d-md-block bg-dark py-3'>";
            component_tjma += "<a class='text-dark' target='_blank' href='"+dataTjma[i]['link']+"' style='text-decoration:none;'>";
            component_tjma += "<img class='d-inline-block w-50 h-25 p-3 img-fluid float-left rounded-circle' src='"+dataTjma[i]['image']+"' alt='"+dataTjma[i]['texto']+"'>";
            component_tjma += "<span class='data-slide float-left'>"+dataTjma[i]['data']+"</span><br>";
            component_tjma += "<h2 class='font-weight-bold'>"+dataTjma[i]['texto']+"</h2>";
            // component_tjma += "<p>"+dataTjma[i][0]['texto']+"</p>";
            component_tjma += "</a>";
            // component_tjma += "</div>";
            component_tjma += "</div>";
        };

        $('#carousel_slide_tjma').html(component_tjma);
        $('#carousel_slide_tjma .carousel-item').first().addClass('active');
        $('.carousel-indicators > li').first().addClass('active');
    }

    // Init Carrousel
    $('.carousel').carousel({
        interval: 8000,
        ride: true
    });

});
